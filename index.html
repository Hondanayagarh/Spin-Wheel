<script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyjwF1_W7x_52piUobgAPfW59qcL7nF3k-VISNrydskQqx9Qpdbdj9BCufghuSfH3hZ/exec";
  const PROXY = "https://corsproxy.io/?";

  document.getElementById("submitBtn").addEventListener("click", async () => {
    const token = document.getElementById("tokenInput").value.trim();
    if (!token) {
      document.getElementById("result").innerText = "⚠️ Please enter a token.";
      return;
    }

    try {
      const res = await fetch(PROXY + encodeURIComponent(SCRIPT_URL + "?token=" + token));
      const data = await res.json();

      if (data.status === "valid") {
        document.getElementById("result").innerText = "✅ Token valid!";
      } else if (data.status === "already") {
        document.getElementById("result").innerText = `🎁 Already used. Prize: ${data.prize}`;
      } else if (data.status === "success") {
        document.getElementById("result").innerText = `🎉 Prize saved: ${data.prize}`;
      } else {
        document.getElementById("result").innerText = "❌ Invalid token.";
      }
    } catch (err) {
      document.getElementById("result").innerText = "⚠️ Network error.";
      console.error(err);
    }
  });
</script>
